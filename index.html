<!DOCTYPE html>
<html lang="es" id="html-root">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="page-title">Herramientas RDF</title>
    <link rel="stylesheet" href="styles.css">
    <!-- Prism.js para resaltado de sintaxis -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet" />
    
    <!-- N3.js para parsear RDF Turtle/N3 -->
    <script src="https://cdn.jsdelivr.net/npm/n3@1.19.0/browser/n3.min.js"></script>
    <!-- jsonld.js para parsear JSON-LD -->
    <script src="https://cdn.jsdelivr.net/npm/jsonld@8.3.2/dist/jsonld.min.js"></script>
    <!-- vis-network para visualización de grafos -->
    <script src="https://unpkg.com/vis-network@9.1.9/standalone/umd/vis-network.min.js"></script>
    <!-- rdflib.js para consultas SPARQL -->
    <script src="https://cdn.jsdelivr.net/npm/rdflib@2.2.34/dist/rdflib.min.js"></script>
    
    <!-- Prism.js scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-turtle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-json.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-sparql.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <div style="position: relative; width: 100%;">
                <h1 data-i18n="app-title">Herramientas RDF</h1>
                <div class="header-controls">
                    <select id="theme-selector" class="theme-selector">
                        <option value="dark" data-i18n-option="theme-dark">Oscuro</option>
                        <option value="light" data-i18n-option="theme-light">Claro</option>
                    </select>
                    <select id="language-selector" class="language-selector">
                        <option value="es" selected>Español</option>
                        <option value="en">English</option>
                        <option value="gl">Galego</option>
                    </select>
                </div>
            </div>
        </header>

        <main>
            <div class="input-section">
                <div class="format-selector-container">
                    <label for="format-selector" data-i18n="format-label">Formato:</label>
                    <select id="format-selector" class="format-selector">
                        <option value="turtle" selected>Turtle/N3</option>
                        <option value="jsonld">JSON-LD</option>
                    </select>
                </div>
                
                <label for="rdf-input" data-i18n="rdf-code-label">Código RDF:</label>
                <pre class="line-numbers" id="rdf-code-pre"><code class="language-turtle" id="rdf-input" contenteditable="true" spellcheck="false" data-i18n-placeholder="rdf-placeholder-turtle">@prefix ex: &lt;http://example.org/&gt; .
@prefix foaf: &lt;http://xmlns.com/foaf/0.1/&gt; .

ex:john a foaf:Person ;
    foaf:name "John Doe" ;
    foaf:knows ex:jane .

ex:jane a foaf:Person ;
    foaf:name "Jane Smith" ;
    foaf:knows ex:john .</code></pre>
                
                <div class="editor-bottom-controls">
                    <button id="verify-btn" class="verify-button" data-i18n="verify-button">Verificar</button>
                    <div class="font-controls">
                        <button id="decrease-font" class="font-btn" title="Reducir tamaño de letra">A-</button>
                        <span id="font-size-display">14px</span>
                        <button id="increase-font" class="font-btn" title="Aumentar tamaño de letra">A+</button>
                    </div>
                </div>
            </div>

            <div id="error-message" class="error-message hidden"></div>

            <div id="results-section" class="results-section hidden">
                <div class="results-header">
                    <h2 data-i18n="results-title">Resultados</h2>
                    <div class="status-badge success" data-i18n="valid-status">✓ Válido</div>
                </div>

                <div class="results-content">
                    <div class="triples-section">
                        <div class="triples-header">
                            <h3 data-i18n="triples-title">Tripletas RDF</h3>
                            <button id="triples-fullscreen-btn" class="fullscreen-button" data-i18n-title="fullscreen-enter">
                                <span class="fullscreen-icon">⛶</span>
                            </button>
                        </div>
                        <div class="table-container">
                            <table id="triples-table">
                                <thead>
                                    <tr>
                                        <th data-i18n="subject-header">Sujeto</th>
                                        <th data-i18n="predicate-header">Predicado</th>
                                        <th data-i18n="object-header">Objeto</th>
                                    </tr>
                                </thead>
                                <tbody id="triples-tbody">
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div class="graph-section">
                        <div class="graph-header">
                            <h3 data-i18n="graph-title">Gráfico de Relaciones</h3>
                            <div class="graph-controls">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="show-prefixes" checked>
                                    <span data-i18n="show-full-uris">Mostrar URIs completas</span>
                                </label>
                                <button id="fullscreen-btn" class="fullscreen-button" data-i18n-title="fullscreen-enter">
                                    <span class="fullscreen-icon">⛶</span>
                                </button>
                            </div>
                        </div>
                        <div id="graph-container"></div>
                    </div>
                </div>
            </div>

            <div id="sparql-section" class="sparql-section hidden">
                <h2 data-i18n="sparql-title">Consultas SPARQL</h2>
                <p class="sparql-description" data-i18n="sparql-description">Ejecuta consultas SPARQL sobre los datos cargados</p>
                
                <div class="sparql-input-section">
                    <label for="sparql-input" data-i18n="sparql-query-label">Consulta SPARQL:</label>
                    <pre class="line-numbers" id="sparql-code-pre"><code class="language-sparql" id="sparql-input" contenteditable="true" spellcheck="false" data-i18n-placeholder="sparql-placeholder">SELECT ?subject ?predicate ?object
WHERE {
  ?subject ?predicate ?object .
}</code></pre>
                    
                    <div class="editor-bottom-controls">
                        <button id="execute-sparql-btn" class="execute-button" data-i18n="execute-query-button">Ejecutar Consulta</button>
                        <div class="sparql-font-controls">
                            <button id="decrease-sparql-font" class="font-btn" title="Reducir tamaño de letra">A-</button>
                            <span id="sparql-font-size-display">14px</span>
                            <button id="increase-sparql-font" class="font-btn" title="Aumentar tamaño de letra">A+</button>
                        </div>
                    </div>
                </div>

                <div id="sparql-error" class="error-message hidden"></div>

                <div id="sparql-results" class="sparql-results hidden">
                    <h3 data-i18n="query-results-title">Resultados de la Consulta</h3>
                    <div class="table-container">
                        <table id="sparql-results-table">
                            <thead id="sparql-results-thead">
                            </thead>
                            <tbody id="sparql-results-tbody">
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </main>

        <footer>
            <p data-i18n="license-text">
                This work is licensed under a <a href="http://creativecommons.org/licenses/by/4.0/" target="_blank" rel="license">Creative Commons Attribution 4.0 International License</a>.
            </p>
            <p style="margin-top: 10px;">
                Copyright (c) Valentín Barral
            </p>
        </footer>
    </div>

    <script src="app.js"></script>
</body>
</html>
